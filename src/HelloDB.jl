module HelloDB
  ##############################################################################
  # Exports
  ##############################################################################

  export Database,
         FileMgrs,
           Blocks,
           Pages

  export DB

  export reset, setdb

  ##############################################################################
  # Includes
  ##############################################################################

  for (dir, filename) in [
      ("FileMgr", "FileMgrs.jl"),
      ("FileMgr", "Blocks.jl"),
      ("FileMgr", "Pages.jl"),
    ]

    include(joinpath(dir, filename))
  end

  ##############################################################################
  # Constants
  ##############################################################################

  DB = false


  ##############################################################################
  # Implementation
  ##############################################################################

  type Database
    filemgr::FileMgr

    function DB(dbname)
      new(FileMgr(dbname))
    end
  end


  ##############################################################################
  # Globals
  ##############################################################################

  function reset()
    DB = false
  end

  function setdb(dbname)
    DB = Database(dbname)
  end
end
